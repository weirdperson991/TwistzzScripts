
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.Name = "FancyLoader"
gui.ResetOnSpawn = false
gui.DisplayOrder = 100
gui.Parent = player:WaitForChild("PlayerGui")


local fade = Instance.new("Frame")
fade.Size = UDim2.fromScale(1, 1)
fade.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
fade.BackgroundTransparency = 0.6
fade.Parent = gui


local main = Instance.new("Frame")
main.Size = UDim2.fromScale(0.32, 0.45)
main.Position = UDim2.fromScale(1.25, 0.5)
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 24)


local stroke = Instance.new("UIStroke", main)
stroke.Color = Color3.fromRGB(100, 100, 100)
stroke.Thickness = 1.5


local bg = Instance.new("ImageLabel")
bg.Size = UDim2.fromScale(1, 1)
bg.BackgroundTransparency = 1
bg.Image = "rbxassetid://126440452834853"
bg.ImageTransparency = 0.85
bg.ScaleType = Enum.ScaleType.Crop
bg.Parent = main


local title = Instance.new("TextLabel")
title.Size = UDim2.fromScale(1, 0.18)
title.BackgroundTransparency = 1
title.Text = "SCRIPT LOADER"
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Parent = main


local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.fromScale(1, 0.72)
scroll.Position = UDim2.fromScale(0, 0.22)
scroll.BackgroundTransparency = 1
scroll.ScrollBarThickness = 5
scroll.ScrollBarImageTransparency = 0.4
scroll.CanvasSize = UDim2.new()
scroll.Parent = main

local layout = Instance.new("UIListLayout")
layout.Padding = UDim.new(0, 14)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.Parent = scroll

layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scroll.CanvasSize = UDim2.fromOffset(0, layout.AbsoluteContentSize.Y + 20)
end)


local function closeUI()
	local tween = TweenService:Create(
		main,
		TweenInfo.new(0.45, Enum.EasingStyle.Quint, Enum.EasingDirection.In),
		{ Position = UDim2.fromScale(1.25, 0.5) }
	)
	tween:Play()
	tween.Completed:Wait()
	gui:Destroy()
end


local function createButton(text, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.fromScale(0.82, 0.16)
	btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
	btn.Text = text
	btn.Font = Enum.Font.GothamSemibold
	btn.TextScaled = true
	btn.TextColor3 = Color3.fromRGB(245, 245, 245)
	btn.AutoButtonColor = false
	btn.Parent = scroll

	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 14)

	local s = Instance.new("UIStroke", btn)
	s.Color = Color3.fromRGB(90, 90, 90)
	s.Thickness = 1.2

	btn.MouseEnter:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.15), {
			BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		}):Play()
	end)

	btn.MouseLeave:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.15), {
			BackgroundColor3 = Color3.fromRGB(35, 35, 35)
		}):Play()
	end)

	btn.MouseButton1Click:Connect(function()
		pcall(callback)
		closeUI()
	end)
end


local MANIFEST_URL =
	"https://raw.githubusercontent.com/weirdperson991/TwistzzScripts/main/Scripts%20Premium/index.json"


local function loadScripts()
	local ok, response = pcall(function()
		return game:HttpGet(MANIFEST_URL)
	end)

	if not ok then
		warn("Failed to load index.json")
		return
	end

	local success, data = pcall(function()
		return HttpService:JSONDecode(response)
	end)

	if not success then
		warn("index.json is invalid JSON")
		return
	end

	for _, info in ipairs(data) do
		if info.name and info.url then
			createButton(info.name, function()
				loadstring(game:HttpGet(info.url))()
			end)
		end
	end
end


loadScripts()


TweenService:Create(
	main,
	TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
	{ Position = UDim2.fromScale(0.5, 0.5) }
):Play()
